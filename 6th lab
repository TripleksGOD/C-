#include <iostream>
#include <string>
#include <list>

struct TABLE
{
    std::string NAZV, DATE, TIME;
    int NUMR;
};

class Stack
{
private:
    std::list<TABLE> data;

public:
    void PushBack(const TABLE& item)
    {
        data.push_back(item);
    }

    void PopBack()
    {
        if (!data.empty())
        {
            data.pop_back();
        }
        else
        {
            std::cout << "Stack is empty" << std::endl;
        }
    }

    TABLE top() const
    {
        if (!data.empty())
        {
            return data.back();
        }
        else
        {
            std::cerr << "Stack is empty" << std::endl;
            exit(1);
        }
    }

    bool IsEmpty() const
    {
        return data.empty();
    }
};

void InformationInput(Stack& a)
{
    int N;
    std::cout << "Enter number of trains: " << std::endl;
    std::cin >> N;

    for (int i = 0; i < N; i++)
    {
        TABLE train;
        std::cout << "Enter info for train number: " << i + 1 << std::endl;
        std::cout << "Enter destination: ";
        std::cin >> train.NAZV;
        std::cout << "Enter date: ";
        std::cin >> train.DATE;
        std::cout << "Enter time: ";
        std::cin >> train.TIME;
        std::cout << "Enter number of train: ";
        std::cin >> train.NUMR;
        a.PushBack(train);
    }
}

void InformationOutput(Stack& a, std::string& b)
{
    int c = 0;
    std::cout << "\nTrains to: " << b << std::endl;
    Stack tempStack;
    while (!a.IsEmpty())
    {
        TABLE train = a.top();
        a.PopBack();
        if (train.NAZV == b)
        {
            std::cout << "Train number: " << train.NUMR << ", Date: " << train.DATE << ", Time: " << train.TIME << ", Number: " << train.NUMR << std::endl;
            c++;
        }
        tempStack.PushBack(train);
    }
    while (!tempStack.IsEmpty())
    {
        TABLE train = tempStack.top();
        tempStack.PopBack();
        a.PushBack(train);
    }

    if (c == 0)
    {
        std::cout << "There are no trains" << std::endl;
    }
}

void AllInformationOutput(Stack& a)
{
    std::cout << "\nAll trains information:" << std::endl;
    Stack tempStack;
    while (!a.IsEmpty())
    {
        TABLE train = a.top();
        a.PopBack();
        std::cout << "Destination: " << train.NAZV << ", Date: " << train.DATE << ", Time: " << train.TIME << ", Train number: " << train.NUMR << std::endl;
        tempStack.PushBack(train);
    }
    while (!tempStack.IsEmpty())
    {
        TABLE train = tempStack.top();
        tempStack.PopBack();
        a.PushBack(train);
    }
}

void Add(Stack& a)
{
    TABLE newTrain;
    std::cout << "\nEnter info for the new train:\n";
    std::cout << "Enter destination: ";
    std::cin >> newTrain.NAZV;
    std::cout << "Enter date: ";
    std::cin >> newTrain.DATE;
    std::cout << "Enter time: ";
    std::cin >> newTrain.TIME;
    std::cout << "Enter number of train: ";
    std::cin >> newTrain.NUMR;
    a.PushBack(newTrain);
}

void Delete(Stack& a, int n)
{
    Stack Temporary;
    while (!a.IsEmpty())
    {
        TABLE train = a.top();
        a.PopBack();
        if (train.NUMR != n)
        {
            Temporary.PushBack(train);
        }
    }
    while (!Temporary.IsEmpty())
    {
        TABLE train = Temporary.top();
        Temporary.PopBack();
        a.PushBack(train);
    }
}

int main()
{
    int NumDelete;
    std::string Destination;

    Stack Trains;

    InformationInput(Trains);

    AllInformationOutput(Trains);

    Add(Trains);

    std::cout << "\nEnter train destination to see information about it: ";
    std::cin >> Destination;
    InformationOutput(Trains, Destination);

    std::cout << "\nEnter train number to delete information about it: ";
    std::cin >> NumDelete;
    Delete(Trains, NumDelete);

    AllInformationOutput(Trains);

    return 0;
}
